# [Gold II] 수식 트리 - 17501 

[문제 링크](https://www.acmicpc.net/problem/17501) 

### 성능 요약

메모리: 68844 KB, 시간: 572 ms

### 분류

깊이 우선 탐색, 그래프 이론, 그래프 탐색, 그리디 알고리즘, 정렬

### 제출 일자

2024년 10월 25일 16:40:50

### 문제 설명

<p>수식 트리는 루트가 있는 이진 트리로 <em>2N-1</em>개의 노드가 있습니다. 1번부터 <em>N</em>번까지 노드는 피연산자 노드이며 다른 노드들은 연산자 노드이고<em> 2N-1</em>번 노드가 루트입니다.</p>

<p>연산자 노드는 항상 두 개의 자식 노드를 가지며 연산자로 '<code>+</code>' 또는 '<code>-</code>' 를 가집니다.</p>

<p>피연산자 노드는 아무 자식도 가지지 않고 하나의 정수를 가집니다.</p>

<p>수식 트리의 계산은 다음과 같이 진행됩니다.</p>

<ol>
	<li>2개의 피연산자 노드를 자식으로 가지는 연산자 노드를 하나 선택합니다.</li>
	<li>해당 노드의 연산자가 '<code>+</code>' 인 경우, 연산자 노드를 피연산자 노드로 바꾸고 값을 왼쪽 노드의 값과 오른쪽 노드의 값을 더한 값을 가지도록 합니다. 해당 노드의 연산자가 '<code>-</code>' 인 경우, 연산자 노드를 피연산자 노드로 바꾸고 값을 왼쪽 노드의 값에서 오른쪽 노드의 값을 뺀 값을 가지도록 합니다.</li>
</ol>

<p>위의 과정을 <em>N-1</em>번 진행하면 하나의 수만 남고 이것이 수식의 결과가 됩니다.</p>

<p>진수는 계산을 시작하기 전에 초기 수식 트리의 두 개의 피연산자 노드를 골라 두 피연산자 노드가 가지는 정수를 서로 바꿀 수 있습니다. 오늘 진수가 할 일은 수식 트리가 주어지면 노드에 있는 정수를 원하는 만큼 바꾸어 수식 트리의 결과값이 최대가 되도록 하는 것입니다.</p>

<p>그런데 수식이 너무 큰 나머지 손으로는 계산하기가 힘듭니다. 진수를 도와주세요.</p>

### 입력 

 <p>첫 번째 줄에 정수 <em>N</em> (2 ≤ <em>N</em> ≤ 100,000) 이 주어집니다.</p>

<p>다음 <em>N</em>개의 줄에는 1번부터 <em>N</em>번 피연산자 노드가 가지는 정수 <em>a<sub>i</sub></em> (-10,000 ≤ <em>a<sub>i</sub></em> ≤ 10,000) 가 주어집니다.</p>

<p>그 다음 <em>N-1</em> 개의 줄에는 <em>N+1</em>번 연산자 노드부터 <em>2N-1</em>번 연산자 노드들의 정보가 주어집니다.</p>

<p>각 줄에는 연산자 노드가 가지는 연산자 <em>o<sub>i</sub></em> (<em>o<sub>i</sub></em> ∈ {'<code>+</code>', '<code>-</code>'}) 와 왼쪽 자식 노드의 번호와 오른쪽 자식의 번호 <em>c<sub>i,1</sub></em>, <em>c<sub>i,2</sub></em> (1 ≤ <em>c<sub>i,1</sub></em>, <em>c<sub>i,2</sub></em> ≤ <em>2N-2</em>) 가 차례대로 주어집니다.</p>

<p>주어진 입력은 계산이 가능한 올바른 트리임이 보장됩니다.</p>

### 출력 

 <p>첫 번째 줄에 피연산자 노드가 가지는 정수들을 바꾸어 만들 수 있는 결과 중 최댓값을 출력합니다.</p>

