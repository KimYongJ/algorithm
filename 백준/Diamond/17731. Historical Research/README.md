# [Diamond V] Historical Research - 17731 

[문제 링크](https://www.acmicpc.net/problem/17731) 

### 성능 요약

메모리: 68604 KB, 시간: 5184 ms

### 분류

자료 구조, 세그먼트 트리, 오프라인 쿼리, 값 / 좌표 압축, 제곱근 분할법, mo's

### 제출 일자

2025년 5월 18일 14:01:43

### 문제 설명

<p>IOI 国の歴史の研究の第一人者であるジョイ教授のもとに，古代の IOI 国の住民が書いたとされる日記が 届いた．ジョイ教授はこの日記から古代の IOI 国における生活を研究するため，日記に書かれている出来 事を調査することにした．</p>

<p>この日記では N 日間に起きた出来事がそれぞれ 1 日あたり 1 つずつ書かれている．出来事は何種類かに 分類されている．i 日目 (1 ≤ i ≤ N) の出来事の種類は整数 X<sub>i</sub> で表される．X<sub>i</sub> の値が大きいほど規模が大き い出来事であると考えられている．</p>

<p>ジョイ教授は次のような方法で日記を分析することにした．</p>

<ol>
	<li>日記の N 日間中で連続する何日間かを，分析する期間として選ぶ．</li>
	<li>出来事の種類 t の重要度を，t × (その期間における種類 t の出来事の個数) とする．</li>
	<li>すべての出来事の種類に対して重要度を計算し，その最大値を算出する．</li>
</ol>

<p>あなたは，ジョイ教授から分析のためのプログラムを作ることを命じられた．このプログラムでは，分 析する期間が与えられたときに重要度の最大値を求められるようにしたい．</p>

<p>日記の N 日間の出来事の種類と，日記の中での期間を表すクエリが Q 個与えられたとき，それぞれのク エリについて出来事の重要度の最大値を求めるプログラムを作成せよ．</p>

### 입력 

 <p>標準入力から以下のデータを読み込め．</p>

<ul>
	<li>1 行目には，整数 N, Q が空白を区切りとして書かれている．これは，日記が N 日間分あり，クエリ が Q 個与えられることを表す．</li>
	<li>次の行には，N 個の整数 X<sub>1</sub>, . . . , X<sub>N</sub> が空白を区切りとして書かれており，X<sub>i</sub> (1 ≤ i ¯ N) は i 日目の 出来事の種類を表す．</li>
	<li>続く Q 行のうちの j 行目 (1 ≤ j ≤ Q) には，整数 A<sub>j</sub> , B<sub>j</sub> (1 ≤ A<sub>j</sub> ≤ B<sub>j</sub> ≤ N) が空白を区切りとして書か れており，j 番目のクエリが A<sub>j</sub> 日目から B<sub>j</sub> 日目までの期間に対するものであることを表す．</li>
</ul>

### 출력 

 <p>標準出力に Q 行出力せよ．j 行目 (1 5 j 5 Q) に，j 番目のクエリに対する重要度の最大値を表す整数を 出力せよ．</p>

