# [Platinum I] 농장 관리 - 5916 

[문제 링크](https://www.acmicpc.net/problem/5916) 

### 성능 요약

메모리: 82816 KB, 시간: 940 ms

### 분류

자료 구조, Heavy-light 분할, 느리게 갱신되는 세그먼트 트리, 세그먼트 트리, 트리

### 제출 일자

2025년 4월 18일 15:08:22

### 문제 설명

<p>N개의 농장과 농장을 양방향으로 연결하는 N-1개의 도로가 있다. 임의의 두 농장 사이에는 하나의 경로만 존재한다. 농장은 1번부터 N번까지 번호가 매겨져 있다.</p>

<p>농장을 관리하는 재현이는 도로에 나무를 심기로 결정했다. 나무를 심는 과정은 쿼리로 이루어져 있으며, 쿼리는 총 2가지가 존재한다.</p>

<ul>
	<li>P u v: u번 농장과 v번 농장 사이의 경로에 존재하는 모든 도로에 나무를 하나씩 심는다.</li>
	<li>Q u v: u번 농장과 v번 농장 사이의 도로에 존재하는 나무의 개수를 출력한다.</li>
</ul>

<p>초기에 나무는 한 그루도 심겨져 있지 않다. 쿼리를 수행해보자.</p>

### 입력 

 <p>첫째 줄에 농장의 수 N과 쿼리의 수 M(1 ≤ N, M ≤ 100,000)이 주어진다.</p>

<p>둘째 줄부터 N-1개의 줄에는 도로가 연결하는 농장의 번호가 주어진다.</p>

<p>다음 M개의 줄에는 쿼리가 한 줄에 하나씩 주어진다. 쿼리는 한 개의 문자 w와 두 개의 정수 u, v로 이루어져 있고, 문제에서 설명한 형식이다.</p>

### 출력 

 <p>쿼리 Q가 주어질 때 마다, 나무의 개수를 출력한다.</p>

